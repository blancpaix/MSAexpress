DB 테이블 설계

ORM 사용을 자제하고 raw query 를 직접 작성해보고 싶었는데 Model 구현하기가 애매해서 ORM 써야겠다.
씁쓸하구먼

================================
auth-service : auth_msa

  USER {
    userUID : int (pk)
    email : char(12)
    phoneNumber : char(11)
    name : char(6),
    displayName: char(24),
    password : char(128),
    point : int,
    state : int(2) { 0: 활성화, 1: 비활성화, 2: 탈퇴, 3: 매니저 }
  }

  POINT {
    idx : int,
    type : string,    
    pay : int,
    load : int,
    itemUID : int (remote server fk),
    note : string,
    userUID : int (fk),
    createdAt : date,
  }



================================
pay-serive : pay_msa

  db2: pay-msa
    ITEMS : {
      itemUID, price, discount, count, discription, img, manager
    },
    Purchases : {
      userUID, 
      count, 
      price, 
      discount, 
      timestamp,
      type,   // card, point, cash, phone, etc
      remark, 
      itemUID(items)
    },

========================================
file-service
  for static files



sequelize

모델 이름 단수로 작성하면 복수로 테이블 만들어줌 강제로 동일화 하려먼 opts에 freezeTableName
모델에 기본적으로 createdAt, updatedAt 필드가 들어감, dataType : DataTypes.DATE 
opts : { timestamps: false, createAt : false } 로 제거

DataTypes.STRING             // VARCHAR(255)
DataTypes.STRING(1234)       // VARCHAR(1234)
DataTypes.TEXT               // TEXT
DataTypes.TEXT('tiny')       // TINYTEXT
DataTypes.BOOLEAN            // TINYINT(1)
DataTypes.INTEGER            // INTEGER.ZEROFILL / UNSIGNED / UNSIGNED.ZEROFILL
DataTypes.BIGINT             // BIGINT
DataTypes.FLOAT              // FLOAT
DataTypes.DATE       // DATETIME for mysql / sqlite, TIMESTAMP WITH TIME ZONE for postgres
DataTypes.DATE(6)    // DATETIME(6) for mysql 5.6.4+. Fractional seconds support with up to 6 digits of precision
DataTypes.DATEONLY   // DATE without time
{  type: DataTypes.UUID, defaultValue: DataTypes.UUIDV4 // Or DataTypes.UUIDV1 }


paranoid : 삭제시 deletedAt 값 설정, destroy ({where}, {force : true})로 완전 삭제
const User = sequelize.define(modelName, attr, opts)
